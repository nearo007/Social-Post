{% extends "layout.html" %}

{% block extrahead %}
    {% load static %}
    <link rel="stylesheet" href="{% static 'css/index.css' %}">
{% endblock %}

{% block content %}
    {% if user.is_authenticated %}
    <h1>Welcome {{ user.username}}!</h1>
    {% else %}
    <h1>Welcome to Messenger!</h1>
    {% endif %}

    <a href="{% url 'create_post' %}"><button>Create a Post!</button></a>

    {% for post in posts %}
        <div class="post-div">
            <div class="div-post-user-date">
                {% if post.author.username == None %}
                    <p class="p-post-author">Deleted User</p>
                {% else %}
                <a href="{% url 'user_page' user_id=post.author.id %}">
                    <p class="p-post-author">{{ post.author.username }}</p>
                </a>
                {% endif %}
                <p class="p-post-date">{{ post.date }}</p>
            </div>
            
            <a href="{% url 'post_page' post_id=post.id %}">    
                <h1 class="h1-post-title">{{ post.title }}</h1>
                <p "p-post-content">{{ post.content|truncatewords:40 }}</p>
            </a>
        </div>
    {% endfor %}
{% endblock %}